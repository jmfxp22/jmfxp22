<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MALK EXPORTAÇÕES — Sites & Templates</title>
  <style>
    :root{
      --blue:#0b63d4; --blue-2:#1466d6; --muted:#6b7280; --card:#fff;
      --bg:#f7fafc; --border:rgba(11,99,212,0.12);
      --shadow: 0 6px 18px rgba(11,99,212,0.06);
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#0f1724}
    .container{max-width:1100px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:52px;height:52px;border-radius:8px;background:linear-gradient(135deg,var(--blue),var(--blue-2));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    nav a{margin-left:14px;color:var(--blue);text-decoration:none;font-weight:600}
    main{margin-top:18px}
    .hero{background:#fff;padding:28px;border-radius:12px;border:1px solid var(--border);display:flex;gap:20px;align-items:center}
    .hero h1{margin:0;font-size:28px;color:#06263b}
    .hero p{margin:8px 0;color:var(--muted)}
    .grid{display:grid;gap:14px}
    .plans{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:14px}
    .plan{background:#fff;border:1px solid var(--border);padding:14px;border-radius:10px}
    .plan h3{margin:0;color:var(--blue)}
    .plan .price{font-weight:800;font-size:22px;margin-top:6px}
    .btn{background:var(--blue);color:#fff;padding:8px 12px;border:none;border-radius:8px;cursor:pointer;font-weight:700}
    .btn-ghost{background:#fff;border:1px solid var(--border);padding:8px 12px;border-radius:8px;cursor:pointer}
    .card{background:#fff;border:1px solid var(--border);padding:12px;border-radius:10px}
    footer{margin-top:20px;text-align:center;color:var(--muted)}
    /* cart */
    .cart-bubble{position:fixed;right:18px;bottom:18px;background:var(--blue);color:#fff;padding:10px 14px;border-radius:999px;box-shadow:0 8px 20px rgba(11,99,212,0.18);cursor:pointer;font-weight:700}
    /* modal */
    .modal{position:fixed;inset:0;background:rgba(3,7,18,0.45);display:flex;align-items:center;justify-content:center;padding:20px}
    .modal-content{width:100%;max-width:820px;background:#fff;border-radius:12px;padding:18px;border:1px solid var(--border)}
    .row{display:flex;gap:12px}
    .col{flex:1}
    input,select,textarea{width:100%;padding:10px;border:1px solid #e6eefb;border-radius:8px}
    .small{font-size:13px;color:var(--muted)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px;border-bottom:1px solid #f1f5f9;text-align:left}
    .muted{color:var(--muted)}
    .pill{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(11,99,212,0.06);color:var(--blue);font-weight:700}
    .admin-btn{position:fixed;left:16px;bottom:14px;background:#fff;border:1px solid var(--border);padding:8px 10px;border-radius:999px;font-weight:700;color:var(--blue);cursor:pointer}
    .search{display:flex;gap:8px;align-items:center}
    @media (max-width:720px){.hero{flex-direction:column;align-items:flex-start}.row{flex-direction:column}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">M</div>
        <div>
          <div style="font-weight:800">MALK EXPORTAÇÕES</div>
          <div class="small">Sites prontos para vender — templates rápidos</div>
        </div>
      </div>
      <nav>
        <a href="#" onclick="scrollToSection('home')">Home</a>
        <a href="#" onclick="scrollToSection('plans')">Planos</a>
        <a href="#" onclick="scrollToSection('support')">Suporte</a>
        <a href="#" onclick="openCart()">Carrinho (<span id="cart-count">0</span>)</a>
      </nav>
    </header>

    <main id="home">
      <section class="hero">
        <div style="flex:1">
          <h1>Bem-vindo à MALK EXPORTAÇÕES</h1>
          <p class="small">Site pronto para vender: escolha um template, monte o seu site e receba pedidos por PIX automaticamente. Rápido, limpo e fácil.</p>
          <div style="margin-top:12px">
            <button class="btn" onclick="scrollToSection('plans')">Ver Planos</button>
            <button class="btn-ghost" style="margin-left:8px" onclick="openCart()">Abrir Carrinho</button>
          </div>
        </div>
        <div style="width:280px">
          <div class="card">
            <div style="font-weight:700">Contato de vendas</div>
            <div class="small" style="margin-top:6px">Fale conosco no WhatsApp para montar seu site: <b>+55 21 97102-1368</b></div>
            <div style="margin-top:8px">
              <button class="btn" onclick="window.open('https://wa.me/5521971021368?text=Olá%20Malk%20Dev%2C%20quero%20informações%20sobre%20sites','_blank')">Chamar no WhatsApp</button>
            </div>
          </div>
        </div>
      </section>

      <section id="plans" style="margin-top:16px">
        <h2 style="margin:0 0 8px 0">Planos Host — Escolha o tipo de site</h2>
        <div class="small">Clique em "Adicionar ao carrinho" para montar o seu pedido. Pagamento somente via PIX.</div>

        <div class="plans">
          <!-- Plans list -->
          <div class="plan">
            <h3>SITE PARA GAMES</h3>
            <div class="price">R$ 79,90</div>
            <div class="small" style="margin-top:6px">Landing, páginas de serviços, integração com formulário de compra.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('SITE PARA GAMES',79.9)">Adicionar ao carrinho</button>
            </div>
          </div>

          <div class="plan">
            <h3>SITE PARA DELIVERY</h3>
            <div class="price">R$ 99,90</div>
            <div class="small" style="margin-top:6px">Cardápio digital, carrinho, checkout com PIX, painel admin.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('SITE PARA DELIVERY',99.9)">Adicionar ao carrinho</button>
            </div>
          </div>

          <div class="plan">
            <h3>SITE PARA E-BOOKS</h3>
            <div class="price">R$ 59,90</div>
            <div class="small" style="margin-top:6px">Página de vendas, entrega de arquivos via link privado.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('SITE PARA E-BOOKS',59.9)">Adicionar ao carrinho</button>
            </div>
          </div>

          <div class="plan">
            <h3>SITE PARA VENDAS</h3>
            <div class="price">R$ 69,90</div>
            <div class="small" style="margin-top:6px">Loja simples, catálogo e checkout via PIX.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('SITE PARA VENDAS',69.9)">Adicionar ao carrinho</button>
            </div>
          </div>

          <div class="plan">
            <h3>SITE PARA MERCADOS</h3>
            <div class="price">R$ 129,90</div>
            <div class="small" style="margin-top:6px">Layouts para mercados, categorias e carrinho avançado.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('SITE PARA MERCADOS',129.9)">Adicionar ao carrinho</button>
            </div>
          </div>

          <div class="plan">
            <h3>OUTROS (CONSULTORIA)</h3>
            <div class="price">R$ 39,90</div>
            <div class="small" style="margin-top:6px">Pequenas customizações e consultoria.</div>
            <div style="margin-top:10px">
              <button class="btn" onclick="addProduct('CONSULTORIA',39.9)">Adicionar ao carrinho</button>
            </div>
          </div>
        </div>
      </section>

      <section id="features" style="margin-top:18px">
        <div class="card">
          <h3>Como funciona (resumido)</h3>
          <ol style="margin:8px 0 0 18px">
            <li>Você escolhe o(s) template(s) e coloca no carrinho.</li>
            <li>No checkout geramos automaticamente o código PIX com o <b></b>.</li>
            <li>O cliente paga via PIX usando o código/QR, envia comprovante para <b>+55 21 97102-1368</b>.</li>
        </div>
      </section>

      <section id="support" style="margin-top:18px">
        <div class="card">
          <h3>Suporte</h3>
          <p class="small">Envie comprovante para: <b>+55 21 97102-1368</b>. Ou clique no botão abaixo.</p>
          <button class="btn" onclick="window.open('https://wa.me/5521971021368?text=Olá%20Malk%20Dev%2C%20tenho%20uma%20dúvida','_blank')">Abrir WhatsApp</button>
        </div>
      </section>

      <footer style="margin-top:22px">
        <div class="small">© MALK EXPORTAÇÕES — protótipo. Para operação real, instalar backend e integração PIX.</div>
      </footer>
    </main>
  </div>

  <!-- CART BUTTON -->
  <div id="cartBtn" class="cart-bubble" onclick="openCart()">Carrinho • <span id="cartSum">R$ 0,00</span></div>

  <!-- ADMIN (SPP MALK) small button -->
  <button class="admin-btn" onclick="openAdminLogin()">SPP MALK</button>

  <!-- MODAL: CART / CHECKOUT / PIX -->
  <div id="modal" style="display:none" class="modal" onclick="closeModal(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div id="modal-body"></div>
    </div>
  </div>

<script>
  /* ---------- storage keys ---------- */
  const STORAGE_ORDERS = 'malk_orders_v1';
  const STORAGE_CART = 'malk_cart_v1';

  /* ---------- initial state ---------- */
  let cart = JSON.parse(localStorage.getItem(STORAGE_CART) || '[]');
  let orders = JSON.parse(localStorage.getItem(STORAGE_ORDERS) || '[]');
  const supportNumber = '+5521971021368'; // target number
  const adminUsername = 'MalkDev0';
  const adminPassword = 'JMFXP22';

  /* ---------- helpers ---------- */
  function saveCart(){ localStorage.setItem(STORAGE_CART, JSON.stringify(cart)); updateCartUI(); }
  function saveOrders(){ localStorage.setItem(STORAGE_ORDERS, JSON.stringify(orders)); }
  function currency(v){ return 'R$ ' + v.toFixed(2).replace('.',','); }
  function updateCartUI(){
    const count = cart.reduce((s,i)=>s+i.qty,0);
    document.getElementById('cart-count').textContent = count;
    const sum = cart.reduce((s,i)=>s + i.qty*i.price, 0);
    document.getElementById('cartSum').textContent = currency(sum);
  }
  updateCartUI();

  function scrollToSection(id){
    const el = document.getElementById(id);
    if(el) el.scrollIntoView({behavior:'smooth',block:'start'});
  }

  /* ---------- products / cart ---------- */
  function addProduct(name,price){
    const slug = name.toLowerCase().replace(/\s+/g,'_');
    const found = cart.find(i=>i.slug===slug);
    if(found){ found.qty++; } else cart.push({slug,name,price,qty:1});
    saveCart();
    openCart();
  }
  function changeQty(slug,delta){
    const it = cart.find(i=>i.slug===slug);
    if(!it) return;
    it.qty += delta;
    if(it.qty <= 0) cart = cart.filter(x=>x.slug!==slug);
    saveCart();
    renderCart();
  }
  function removeItem(slug){
    cart = cart.filter(x=>x.slug!==slug);
    saveCart();
    renderCart();
  }

  /* ---------- modal control ---------- */
  function openCart(){
    renderCart();
    showModal();
  }
  function showModal(){ document.getElementById('modal').style.display = 'flex'; }
  function closeModal(e){
    if(e) {
      // close when clicked background
      document.getElementById('modal').style.display = 'none';
    }
  }

  /* ---------- cart / checkout render ---------- */
  function renderCart(){
    const body = document.getElementById('modal-body');
    body.innerHTML = '';
    const wrapper = document.createElement('div');
    wrapper.innerHTML = '<h2>Carrinho</h2>';
    if(cart.length===0){
      wrapper.innerHTML += '<div class="small muted">Carrinho vazio</div><div style="margin-top:12px"><button class="btn-ghost" onclick="closeModal()">Fechar</button></div>';
      body.appendChild(wrapper); return;
    }
    const table = document.createElement('div');
    table.innerHTML = '<div style="max-height:300px;overflow:auto;margin-top:8px"></div>';
    const list = document.createElement('div');
    cart.forEach(item=>{
      const row = document.createElement('div');
      row.style.display='flex';row.style.justifyContent='space-between';row.style.padding='8px 0';row.style.borderBottom='1px solid #f1f5f9';
      row.innerHTML = `<div>${item.name} <span class="small">x${item.qty}</span></div><div>${currency(item.qty*item.price)}</div>`;
      list.appendChild(row);
      const controls = document.createElement('div');
      controls.style.marginTop='6px';
    });
    table.firstChild.appendChild(list);
    const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
    table.innerHTML += `<div style="margin-top:10px;font-weight:700">Total: ${currency(total)}</div>`;
    table.innerHTML += `<div style="margin-top:10px"><button class="btn" onclick="beginCheckout()">Finalizar pedido (PIX)</button> <button class="btn-ghost" onclick="closeModal()">Continuar comprando</button></div>`;
    wrapper.appendChild(table);
    body.appendChild(wrapper);
  }

  /* ---------- checkout: collects customer's info and generate order ---------- */
  function beginCheckout(){
    const body = document.getElementById('modal-body');
    body.innerHTML = `<h2>Checkout - Pagamento por PIX</h2>
      <div style="display:grid;gap:8px;margin-top:8px">
        <input id="c-name" placeholder="Nome completo *" />
        <input id="c-phone" placeholder="Telefone (Ex: 21999998888) *" />
        <input id="c-street" placeholder="Rua *" />
        <input id="c-number" placeholder="Número *" />
        <input id="c-city" placeholder="Cidade *" />
        <textarea id="c-ref" placeholder="Ponto de referência (opcional)" rows="2"></textarea>
        <div style="margin-top:6px" class="small">Pagamento: <b>PIX (somente)</b></div>
        <div style="margin-top:6px">
          <button class="btn" onclick="createOrder()">Gerar PIX e finalizar</button>
          <button class="btn-ghost" onclick="openCart()">Voltar</button>
        </div>
      </div>`;
  }

  function generateId(){
    const s = Date.now().toString(36) + '-' + Math.floor(Math.random()*1e6).toString(36);
    return ('ORD-'+s).toUpperCase();
  }

  function createOrder(){
    const name = document.getElementById('c-name').value.trim();
    const phone = document.getElementById('c-phone').value.trim();
    const street = document.getElementById('c-street').value.trim();
    const number = document.getElementById('c-number').value.trim();
    const city = document.getElementById('c-city').value.trim();
    const ref = document.getElementById('c-ref').value.trim();

    if(!name || !phone || !street || !number || !city) { alert('Preencha os campos obrigatórios.'); return; }
    if(cart.length===0){ alert('Carrinho vazio.'); return; }

    const id = generateId();
    const total = cart.reduce((s,i)=>s+i.price*i.qty,0);
    // Create a PIX payload simulation (in production: integrate with gateway)
    // We'll create a simple textual payload containing merchant key + id + amount
    // For convenience we show a copyable string and a generated "chave PIX" exemplo
    const pixKey = 'malkpix@banco-exemplo';
    const pixPayload = `PIX|chave:${pixKey}|valor:${total.toFixed(2)}|id:${id}|descricao:MALK_EXPORTACOES`;
    const order = {
      id, createdAt: new Date().toISOString(), customer:{name,phone,street,number,city,ref},
      items: cart.map(i=>({name:i.name,price:i.price,qty:i.qty})), total, pix:{key:pixKey,payload:pixPayload}, paid:false
    };
    orders.unshift(order);
    saveOrders();
    // clear cart
    cart = [];
    saveCart();

    // show PIX screen
    showPixScreen(order);
  }

  function showPixScreen(order){
    const body = document.getElementById('modal-body');
    body.innerHTML = `<h2>PIX gerado — envie comprovante</h2>
      <div style="display:flex;flex-direction:column;gap:8px">
        <div class="small">ID do pedido: <span class="pill">${order.id}</span></div>
        <div class="small">Valor: <b>${currency(order.total)}</b></div>
        <div class="card" style="padding:10px">
          <div style="font-weight:700">Chave PIX: <span style="color:var(--blue)">${order.pix.key}</span></div>
          <div class="small" style="margin-top:6px;word-break:break-all">${order.pix.payload}</div>
          <div style="margin-top:8px" class="small">Copiar o payload para pagar no seu app bancário, ou use QR se seu banco aceitar.</div>
          <div style="margin-top:8px">
            <button class="btn" onclick="copyText('${escapeHtml(order.pix.payload)}')">Copiar PIX</button>
            <button class="btn-ghost" onclick="simulateRealPix('${order.id}')">Simular pagamento (dev)</button>
          </div>
        </div>

        <div class="small">Ao pagar, envie o comprovante para o número abaixo (ou clique para abrir o WhatsApp). Inclua o ID do pedido.</div>
        <div style="margin-top:6px">
          <a class="btn" target="_blank" href="https://wa.me/${supportNumber.replace(/\+/g,'')}?text=${encodeURIComponent('Olá, enviei o PIX. Pedido ID: '+order.id)}">Enviar comprovante (WhatsApp)</a>
        </div>
        <div class="small muted" style="margin-top:6px">Obs: O pagamento só será considerado confirmado quando você ou o admin verificarem o comprovante e marcarem como pago no painel.</div>
      </div>`;
    showModal();
  }

  function escapeHtml(s){ return s.replace(/'/g,"\\'").replace(/"/g,'\\"'); }

  function copyText(txt){
    navigator.clipboard.writeText(txt).then(()=>alert('PIX copiado para área de transferência.'));
  }

  /* ---------- admin login / dashboard ---------- */
  function openAdminLogin(){
    // small modal for admin login
    const body = document.getElementById('modal-body');
    body.innerHTML = `<h2>Painel Admin (SPP MALK)</h2>
      <div style="display:grid;gap:8px;margin-top:8px">
        <input id="adm-user" placeholder="Usuário" value="" />
        <input id="adm-pass" placeholder="Senha" type="password" />
        <div>
          <button class="btn" onclick="tryAdminLogin()">Entrar</button>
          <button class="btn-ghost" onclick="closeModal()">Fechar</button>
        </div>
      </div>`;
    showModal();
  }

  function tryAdminLogin(){
    const u = document.getElementById('adm-user').value.trim();
    const p = document.getElementById('adm-pass').value.trim();
    if(u===adminUsername && p===adminPassword){
      renderAdminDashboard();
    } else {
      alert('Credenciais incorretas.');
    }
  }

  function renderAdminDashboard(){
    const body = document.getElementById('modal-body');
    body.innerHTML = `<h2>Painel do Gerente — MALK EXPORTAÇÕES</h2>
      <div style="display:flex;justify-content:space-between;gap:8px;align-items:center;margin-top:8px">
        <div class="search">
          <input id="adm-search" placeholder="Pesquisar por ID" />
          <button class="btn" onclick="admSearch()">Buscar</button>
        </div>
        <div>
          <button class="btn-ghost" onclick="exportJSON()">Exportar DB (JSON)</button>
          <button class="btn" onclick="closeModal()">Sair</button>
        </div>
      </div>
      <div style="margin-top:12px;display:flex;gap:12px">
        <div style="flex:1" id="adm-left"></div>
        <div style="width:340px" id="adm-right"></div>
      </div>`;
    populateAdminLeft();
    populateAdminRight();
    showModal();
  }

  function populateAdminLeft(){
    const left = document.getElementById('adm-left');
    left.innerHTML = '<div style="font-weight:700">Pedidos recentes</div>';
    if(orders.length===0){ left.innerHTML += '<div class="small muted" style="margin-top:8px">Nenhum pedido</div>'; return; }
    const container = document.createElement('div');
    container.style.maxHeight='420px';container.style.overflow='auto';container.style.marginTop='8px';
    orders.forEach(o=>{
      const card = document.createElement('div');
      card.className='card'; card.style.marginBottom='8px';
      card.innerHTML = `<div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700">${o.id}</div>
            <div class="small">${o.customer.name} • ${o.customer.city}</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:800">${currency(o.total)}</div>
            <div class="small">${new Date(o.createdAt).toLocaleString()}</div>
            <div style="margin-top:6px">
              <button class="btn-ghost" onclick="admView('${o.id}')">Ver</button>
            </div>
          </div>
        </div>`;
      container.appendChild(card);
    });
    left.appendChild(container);
  }

  function populateAdminRight(orderId){
    const right = document.getElementById('adm-right');
    if(!orders || orders.length===0){ right.innerHTML = '<div class="small muted">Sem pedidos para mostrar</div>'; return; }
    let o = orders[0];
    if(orderId) o = orders.find(x=>x.id===orderId) || o;
    if(!o){ right.innerHTML = '<div class="small muted">Pedido não encontrado</div>'; return; }
    right.innerHTML = `<div style="font-weight:700">Detalhes</div>
      <div style="margin-top:8px">
        <div class="small">ID:</div><div style="font-weight:800">${o.id}</div>
        <div class="small" style="margin-top:6px">Cliente:</div><div>${o.customer.name} — ${o.customer.phone}</div>
        <div class="small" style="margin-top:6px">Endereço:</div><div>${o.customer.street}, ${o.customer.number} — ${o.customer.city}</div>
        <div class="small" style="margin-top:6px">Referência:</div><div>${o.customer.ref||'—'}</div>
        <div class="small" style="margin-top:6px">Itens:</div>
        <div style="margin-top:6px">
          ${o.items.map(it=>`<div>${it.name} x${it.qty} — ${currency(it.price*it.qty)}</div>`).join('')}
        </div>
        <div style="margin-top:8px;font-weight:800">Total: ${currency(o.total)}</div>
        <div style="margin-top:8px" class="small">PIX payload:</div><div class="small" style="word-break:break-all">${o.pix.payload}</div>

        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn" onclick="markPaid('${o.id}')">${o.paid? 'Pago ✓' : 'Marcar como pago'}</button>
          <button class="btn-ghost" onclick="openWhatsAppForOrder('${o.id}')">Abrir WhatsApp</button>
          <button class="btn-ghost" onclick="deleteOrder('${o.id}')">Excluir</button>
        </div>
      </div>`;
  }

  function admView(id){ populateAdminRight(id); }

  function admSearch(){
    const q = document.getElementById('adm-search').value.trim();
    if(!q) return alert('Insira um ID para buscar.');
    const o = orders.find(x=>x.id===q);
    if(!o) return alert('ID não encontrado');
    populateAdminRight(o.id);
  }

  function markPaid(id){
    const o = orders.find(x=>x.id===id);
    if(!o) return alert('Pedido não encontrado');
    o.paid = true;
    saveOrders();
    populateAdminLeft();
    populateAdminRight(id);
    alert('Pedido marcado como pago.');
  }

  function deleteOrder(id){
    if(!confirm('Excluir pedido? Esta ação é irreversível.')) return;
    orders = orders.filter(x=>x.id!==id);
    saveOrders();
    populateAdminLeft();
    populateAdminRight();
  }

  function openWhatsAppForOrder(id){
    const o = orders.find(x=>x.id===id);
    if(!o) return alert('Pedido não encontrado');
    const text = `Olá, verifiquei o pedido ID: ${o.id} - Cliente: ${o.customer.name} - Valor: R$ ${o.total.toFixed(2)}. Envio comprovante.`;
    window.open(`https://wa.me/${supportNumber.replace(/\+/g,'')}?text=${encodeURIComponent(text)}`,'_blank');
  }

  function exportJSON(){
    const data = JSON.stringify(orders, null, 2);
    navigator.clipboard.writeText(data).then(()=>alert('JSON copiado para área de transferência.'));
  }

  /* ---------- misc dev helpers ---------- */
  function simulateRealPix(id){
    // Simulate an incoming payment by marking as paid automatically
    const o = orders.find(x=>x.id===id);
    if(!o) { alert('Pedido não encontrado'); return; }
    o.paid = true;
    saveOrders();
    alert('Pagamento simulado: pedido marcado como pago.');
    // open admin view for convenience
    renderAdminDashboard();
    admView(id);
  }

  // For quick tests: allow simulate payment via URL param ?simulate
  (function handleUrlSim(){
    // nothing for now
  })();

  // expose some functions for inline buttons
  window.addProduct = addProduct;
  window.openCart = openCart;
  window.openAdminLogin = openAdminLogin;
  window.copyText = copyText;
  window.simulateRealPix = simulateRealPix;
  window.openWhatsAppForOrder = openWhatsAppForOrder;
  window.deleteOrder = deleteOrder;
  window.beginCheckout = beginCheckout;
  window.createOrder = createOrder;
  window.admView = admView;
  window.markPaid = markPaid;

  // small helper to keep UI updated on load
  document.addEventListener('DOMContentLoaded', ()=>updateCartUI());
</script>
</body>
</html>

